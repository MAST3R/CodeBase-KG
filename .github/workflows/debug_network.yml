name: Debug Network to Groq

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest

    steps:
      - name: Check built-in tools
        run: |
          which nslookup || true
          which dig || true
          which curl || true

      - name: DNS test with nslookup (if available)
        run: |
          echo "DNS test:"
          nslookup api.groq.ai || echo "nslookup not available"

      - name: Curl HTTPS connectivity test
        run: |
          echo "curl -I https://api.groq.ai/v1/generate"
          curl -I https://api.groq.ai/v1/generate || true

      - name: Python socket DNS resolution test
        run: |
          python3 - << 'EOF'
import socket
try:
    print("Resolving api.groq.ai...")
    print(socket.getaddrinfo("api.groq.ai", 443))
except Exception as e:
    print("DNS resolution FAILED:", e)
EOF
